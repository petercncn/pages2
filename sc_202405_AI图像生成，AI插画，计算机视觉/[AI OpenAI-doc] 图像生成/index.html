
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="description" content="学习如何在API中使用DALL·E生成或操作图像。">
                <meta name="keywords" content="[AI OpenAI-doc] 图像生成, 学习如何在API中使用DALL·E生成或操作图像。">
                <meta property="og:title" content="[AI OpenAI-doc] 图像生成">
                <title>[AI OpenAI-doc] 图像生成</title>
                <style>.hidden{visibility:hidden;font-size:1px;}</style>
            </head>
            <body>
                <div class="rich_media_wrp" id="img-content">
<h1 class="rich_media_title" id="activity-name">
            
[AI OpenAI-doc] 图像生成
          </h1>

<div class="rich_media_content js_underline_content autoTypeSetting24psection" id="js_content" style="visibility: visible;"><section style="margin-bottom: 0px;"><span style='color: rgb(255, 0, 0);font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";letter-spacing: normal;text-align: start;text-wrap: wrap;'><span style='outline: 0px;color: rgb(255, 0, 0);font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";letter-spacing: normal;text-align: start;text-wrap: wrap;background-color: rgb(255, 255, 255);visibility: visible;'>如需最佳阅读体验，请访问</span><span style='outline: 0px;color: rgb(255, 0, 0);font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";letter-spacing: normal;text-align: start;text-wrap: wrap;background-color: rgb(255, 255, 255);visibility: visible;'>博客 </span><span style='outline: 0px;color: rgb(255, 0, 0);font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";letter-spacing: normal;text-align: start;text-wrap: wrap;background-color: rgb(255, 255, 255);visibility: visible;'>https://openai-doc.aihub2022.top/</span></span></section><section style="margin-bottom: 0px;"><span style='color: rgb(255, 0, 0);font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";letter-spacing: normal;text-align: start;text-wrap: wrap;'>关注我！带你一起AI</span></section><section class="mp_profile_iframe_wrp" style="margin-bottom: 24px;"><mp-common-profile class="js_uneditable custom_select_card mp_profile_iframe" data-alias="" data-from="0" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/vibPgv7vI2icO3f4wubftjjbMyDT4FyzgeXeeuhKu3mc3k0xEoch775RXY9wT5OVO29IUgKAyZjicXjU6I3yDsdZQ/0?wx_fmt=png" data-id="MzA3MDIyNTgzNA==" data-is_biz_ban="0" data-nickname="从零开始学AI" data-pluginname="mpprofile" data-signature="关注我，带你一起AI"></mp-common-profile></section><section style="margin-bottom: 24px;"><span style="font-size: var(--articleFontsize);letter-spacing: 0.034em;">学习如何在API中使用DALL·E生成或操作图像。</span></section><p><span style="color: #6a9955;">&gt;</span> 想要在ChatGPT中生成图像吗？请访问chat.openai.com。</p><p><span style="color: #569cd6;font-weight: bold;">## 介绍</span></p><p>图像API提供了三种与图像交互的方法：</p><ul class="list-paddingleft-1" style="list-style-type: circle;"><li><p><span style="color: #6796e6;">1.</span> 根据文本提示从头开始创建图像（适用于DALL·E 3和DALL·E 2）</p></li><li><p><span style="color: #6796e6;">2.</span> 通过让模型替换预先存在图像的某些区域，基于新的文本提示来创建编辑版本的图像（仅适用于DALL·E 2）</p></li><li><p><span style="color: #6796e6;">3.</span> 创建现有图像的变体（仅适用于DALL·E 2）</p></li></ul><p><br/></p><p>本指南涵盖了使用这三个API端点的基础知识，并提供了有用的代码示例。想要尝试DALL·E 3，请前往ChatGPT。想要尝试DALL·E 2，请查看DALL·E预览应用。</p><p><span style="color: #569cd6;font-weight: bold;">## 用法</span></p><p><span style="color: #569cd6;font-weight: bold;">### 生成</span></p><p>图像生成端点允许您根据文本提示创建原始图像。在使用DALL·E 3时，图像可以是1024x1024、1024x1792或1792x1024像素大小。</p><p>默认情况下，图像以标准质量生成，但在使用DALL·E 3时，您可以设置quality："hd"以获得增强的细节。方形、标准质量的图像生成速度最快。</p><p>您可以使用DALL·E 3一次请求1张图像（通过进行并行请求来请求更多），或者使用DALL·E 2并通过n参数一次请求最多10张图像。</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="makefile"><code><span class="code-snippet_outer">```python</span></code><code><span class="code-snippet_outer">from openai import OpenAI</span></code><code><span class="code-snippet_outer">client = OpenAI()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">response = client.images.generate(</span></code><code><span class="code-snippet_outer">  model=<span class="code-snippet__string">"dall-e-3"</span>,</span></code><code><span class="code-snippet_outer">  prompt=<span class="code-snippet__string">"a white siamese cat"</span>,</span></code><code><span class="code-snippet_outer">  size=<span class="code-snippet__string">"1024x1024"</span>,</span></code><code><span class="code-snippet_outer">  quality=<span class="code-snippet__string">"standard"</span>,</span></code><code><span class="code-snippet_outer">  n=1,</span></code><code><span class="code-snippet_outer">)</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">image_url = response.data[0].url</span></code><code><span class="code-snippet_outer">```</span></code></pre></section><p><span style="color: #569cd6;font-weight: bold;">## 提示</span></p><p>随着DALL·E 3的发布，出于安全考虑和为了增加更多细节（更详细的提示通常会产生更高质量的图像），模型现在会接受提供的默认提示，并自动重新编写它。</p><p>尽管目前无法禁用此功能，但您可以使用提示将输出更接近您请求的图像，方法是在提示中添加以下内容：<span style="color: #ce9178;">`I NEED to test how the tool works with extremely simple prompts. DO NOT add any detail, just use it AS-IS:`</span>。</p><p>更新后的提示在数据响应对象的 <span style="color: #ce9178;">`revised_prompt`</span> 字段中可见。</p><p><span style="color: #569cd6;font-weight: bold;">## 示例DALL·E 3生成</span></p><p style="text-align: center;"><img class="rich_pages wxw-img" data-galleryid="" data-imgfileid="502493223" data-ratio="0.8707280832095097" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/vibPgv7vI2icPQh6iaQTzXXUZg6CPB8pfnfpHojM8MHhric4cxKCqibjbzPbf8LqcfGPZq2b2Vjtvs2PfgIoA0rjhyQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="673" src="20240525_035124_0.jpeg" style=""/></p><p>每个图像可以作为URL或Base64数据返回，使用response_format参数。URL将在一小时后过期。</p><p><span style="color: #569cd6;font-weight: bold;">### 编辑（仅适用于DALL·E 2）</span></p><p>也称为“修补”，图像编辑端点允许您通过上传图像和掩码来编辑或扩展图像，指示应该替换哪些区域。掩码的透明区域指示图像应该进行编辑的位置，提示应该描述完整的新图像，而不仅仅是被擦除的区域。该端点可以实现我们的DALL·E预览应用程序中的编辑器等体验。</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="makefile"><code><span class="code-snippet_outer">```python</span></code><code><span class="code-snippet_outer">from openai import OpenAI</span></code><code><span class="code-snippet_outer">client = OpenAI()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">response = client.images.edit((</span></code><code><span class="code-snippet_outer">  model=<span class="code-snippet__string">"dall-e-2"</span>,</span></code><code><span class="code-snippet_outer">  image=open(<span class="code-snippet__string">"sunlit_lounge.png"</span>, <span class="code-snippet__string">"rb"</span>),</span></code><code><span class="code-snippet_outer">  mask=open(<span class="code-snippet__string">"mask.png"</span>, <span class="code-snippet__string">"rb"</span>),</span></code><code><span class="code-snippet_outer">  prompt=<span class="code-snippet__string">"A sunlit indoor lounge area with a pool containing a flamingo"</span>,</span></code><code><span class="code-snippet_outer">  n=1,</span></code><code><span class="code-snippet_outer">  size=<span class="code-snippet__string">"1024x1024"</span></span></code><code><span class="code-snippet_outer">)</span></code><code><span class="code-snippet_outer">image_url = response.data[0].url</span></code><code><span class="code-snippet_outer">```</span></code></pre></section><p style="text-align: center;"><img class="rich_pages wxw-img" data-galleryid="" data-imgfileid="502493224" data-ratio="0.4211309523809524" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/vibPgv7vI2icPQh6iaQTzXXUZg6CPB8pfnf2KNRsWQaKYQWs7wLOnyuPclnbctvKGpyY8svJzzHD7lhZt0q59owicw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="672" src="20240525_035126_1.jpeg" style=""/></p><p>提示：一个阳光明媚的室内休息区，里面有一个含有火烈鸟的游泳池。</p><p>上传的图像和掩码都必须是小于4MB的正方形PNG图像，并且它们的尺寸必须彼此相同。掩码的非透明区域在生成输出时不会被使用，因此它们不一定需要像上面的示例一样与原始图像匹配。</p><p><span style="color: #569cd6;font-weight: bold;">### 变体（仅适用于DALL·E 2）</span></p><p>图像变体端点允许您生成给定图像的变体。</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="makefile"><code><span class="code-snippet_outer">```python</span></code><code><span class="code-snippet_outer">from openai import OpenAI</span></code><code><span class="code-snippet_outer">client = OpenAI()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">response = client.images.create_variation(</span></code><code><span class="code-snippet_outer">  model=<span class="code-snippet__string">"dall-e-2"</span>,</span></code><code><span class="code-snippet_outer">  image=open(<span class="code-snippet__string">"corgi_and_cat_paw.png"</span>, <span class="code-snippet__string">"rb"</span>),</span></code><code><span class="code-snippet_outer">  n=1,</span></code><code><span class="code-snippet_outer">  size=<span class="code-snippet__string">"1024x1024"</span></span></code><code><span class="code-snippet_outer">)</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">image_url = response.data[0].url</span></code><code><span class="code-snippet_outer">```</span></code></pre></section><p style="text-align: center;"></p><p>与编辑端点类似，输入图像必须是小于4MB的正方形PNG图像。</p><p><span style="color: #569cd6;font-weight: bold;">### 内容管理</span></p><p>基于我们的内容政策，对提示和图像进行过滤，当提示或图像被标记时返回错误。</p><p><span style="color: #569cd6;font-weight: bold;">## 特定语言的提示</span></p><p><span style="color: #569cd6;font-weight: bold;">### 使用内存中的图像数据</span></p><p>上面指南中的Python示例使用open函数从磁盘读取图像数据。在某些情况下，您可能将图像数据存储在内存中。下面是一个使用存储在BytesIO对象中的图像数据的示例API调用：</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="properties"><code><span class="code-snippet_outer"><span class="code-snippet__attr">```python</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">from</span> <span class="code-snippet__string">io import BytesIO</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">from</span> <span class="code-snippet__string">openai import OpenAI</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">client</span> = <span class="code-snippet__string">OpenAI()</span></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment"># This is the BytesIO object that contains your image data</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">byte_stream</span>: <span class="code-snippet__string">BytesIO = [your image data]</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">byte_array</span> = <span class="code-snippet__string">byte_stream.getvalue()</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">response</span> = <span class="code-snippet__string">client.images.create_variation(</span></span></code><code><span class="code-snippet_outer">  <span class="code-snippet__attr">image</span>=<span class="code-snippet__string">byte_array,</span></span></code><code><span class="code-snippet_outer">  <span class="code-snippet__attr">n</span>=<span class="code-snippet__string">1,</span></span></code><code><span class="code-snippet_outer">  <span class="code-snippet__attr">model</span>=<span class="code-snippet__string">"dall-e-2",</span></span></code><code><span class="code-snippet_outer">  <span class="code-snippet__attr">size</span>=<span class="code-snippet__string">"1024x1024"</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">)</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__attr">```</span></span></code></pre></section><p><span style="color: #569cd6;font-weight: bold;">### 处理图像数据</span></p><p>在将图像传递给API之前进行操作可能很有用。以下是一个使用PIL调整图像大小的示例：</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="makefile"><code><span class="code-snippet_outer">```python</span></code><code><span class="code-snippet_outer">from io import BytesIO</span></code><code><span class="code-snippet_outer">from PIL import Image</span></code><code><span class="code-snippet_outer">from openai import OpenAI</span></code><code><span class="code-snippet_outer">client = OpenAI()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment"># Read the image file from disk and resize it</span></span></code><code><span class="code-snippet_outer">image = Image.open(<span class="code-snippet__string">"image.png"</span>)</span></code><code><span class="code-snippet_outer">width, height = 256, 256</span></code><code><span class="code-snippet_outer">image = image.resize((width, height))</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment"># Convert the image to a BytesIO object</span></span></code><code><span class="code-snippet_outer">byte_stream = BytesIO()</span></code><code><span class="code-snippet_outer">image.save(byte_stream, format='PNG')</span></code><code><span class="code-snippet_outer">byte_array = byte_stream.getvalue()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer">response = client.images.create_variation(</span></code><code><span class="code-snippet_outer">  image=byte_array,</span></code><code><span class="code-snippet_outer">  n=1,</span></code><code><span class="code-snippet_outer">  model=<span class="code-snippet__string">"dall-e-2"</span>,</span></code><code><span class="code-snippet_outer">  size=<span class="code-snippet__string">"1024x1024"</span></span></code><code><span class="code-snippet_outer">)</span></code><code><span class="code-snippet_outer">```</span></code></pre></section><p><span style="color: #569cd6;font-weight: bold;">### 错误处理</span></p><p>由于无效输入、速率限制或其他问题，API请求可能会返回错误。可以使用try...except语句处理这些错误，并且错误详情可以在e.error中找到：</p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="swift"><code><span class="code-snippet_outer">```python</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">import</span> openai</span></code><code><span class="code-snippet_outer">from openai <span class="code-snippet__keyword">import</span> OpenAI</span></code><code><span class="code-snippet_outer">client = <span class="code-snippet__type">OpenAI</span>()</span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><br/></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">try</span>:</span></code><code><span class="code-snippet_outer">  response = client.images.create_variation(</span></code><code><span class="code-snippet_outer">    image=<span class="code-snippet__keyword">open</span>(<span class="code-snippet__string">"image_edit_mask.png"</span>, <span class="code-snippet__string">"rb"</span>),</span></code><code><span class="code-snippet_outer">    n=<span class="code-snippet__number">1</span>,</span></code><code><span class="code-snippet_outer">    model=<span class="code-snippet__string">"dall-e-2"</span>,</span></code><code><span class="code-snippet_outer">    size=<span class="code-snippet__string">"1024x1024"</span></span></code><code><span class="code-snippet_outer">  )</span></code><code><span class="code-snippet_outer">  <span class="code-snippet__built_in">print</span>(response.data[<span class="code-snippet__number">0</span>].url)</span></code><code><span class="code-snippet_outer">except openai.<span class="code-snippet__type">OpenAIError</span> <span class="code-snippet__keyword">as</span> e:</span></code><code><span class="code-snippet_outer">  <span class="code-snippet__built_in">print</span>(e.http_status)</span></code><code><span class="code-snippet_outer">  <span class="code-snippet__built_in">print</span>(e.error)</span></code><code><span class="code-snippet_outer">```</span></code></pre></section><p>---</p><ul class="list-paddingleft-1" style="list-style-type: circle;"><li><p><span style="text-decoration: underline;">https://platform.openai.com/docs/guides/images/</span></p></li><li><p><span style="font-size: var(--articleFontsize);letter-spacing: 0.034em;text-decoration: underline;">https://openai-doc.aihub2022.top/docs/guides/images/</span><span style="font-size: var(--articleFontsize);letter-spacing: 0.034em;"></span></p></li></ul><section class="mp_profile_iframe_wrp" style="margin-bottom: 0px;"><mp-common-profile class="js_uneditable custom_select_card mp_profile_iframe" data-alias="" data-from="0" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/vibPgv7vI2icO3f4wubftjjbMyDT4FyzgeXeeuhKu3mc3k0xEoch775RXY9wT5OVO29IUgKAyZjicXjU6I3yDsdZQ/0?wx_fmt=png" data-id="MzA3MDIyNTgzNA==" data-is_biz_ban="0" data-nickname="从零开始学AI" data-pluginname="mpprofile" data-signature="关注我，带你一起AI！"></mp-common-profile></section><p style="margin-bottom: 0px;"><span style='color: rgb(255, 0, 0);letter-spacing: 0.578px;text-align: left;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";'>欢迎进群，一起交流学习AI</span></p><section style="margin-bottom: 24px;"><span style='text-wrap: wrap;background-color: rgb(255, 255, 255);letter-spacing: 0.578px;text-align: left;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif, "Apple Color Emoji", "Segoe UI Emoji";color: rgb(255, 76, 65);'>关注我，发送“进群”，即可获得群二维码，扫码入群</span></section><p style="display: none;"><mp-style-type data-value="3"></mp-style-type></p></div>

</div>
                <p></p>
                <p></p>
                <div>本文由“公众号文章抓取器”生成，请忽略上文所有联系方式或指引式信息。有问题可以联系：五人工作室，官网：www.Wuren.Work，QQ微信同号1976.424.585 </div>
                <div  class="hidden">本文由“公众号文章抓取器”生成，请忽略上文所有联系方式或指引式信息。有问题可以联系：五人工作室，官网：www.Wuren.Work，QQ微信同号1976.424.585 <br><p class="hidden">code/s?__biz=MzA3MDIyNTgzNA==&mid=2649976877&idx=1&sn=6060488c66cffd3484e26d7c99cd3705&chksm=86c7cae8b1b043fe3d21950723d0fb67a659c713b59ddf3704c988ea688335f8556e4a84b72e#rd </p></div>
            </body>
            </html>
            